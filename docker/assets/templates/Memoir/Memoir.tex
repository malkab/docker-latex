%% This template is based on pandoc default template. Refer to it to
%% add default functionality
\documentclass[$if(fontsize)$$fontsize$,$endif$$if(lang)$$lang$,$endif$$if(papersize)$$papersize$,$endif$$if(classoptions)$$for(classoptions)$$classoptions$$sep$,$endfor$$endif$,extrafontsizes]{memoir}


%% Packages
\usepackage{eurosym}
\usepackage[unicode=true]{hyperref}
$if(lang)$
\usepackage[$lang$]{babel}
$endif$
$if(fontfamily)$
\usepackage{$fontfamily$}
$endif$
\usepackage[utf8]{inputenc}
$if(papersize)$
\usepackage[$papersize$]{geometry}
$else$
\usepackage[]{geometry}
$endif$
\usepackage{ragged2e}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{amssymb,amsmath,mathrsfs}
\usepackage[sc]{mathpazo}

%% Math style
\AtBeginDocument{\DeclareMathAlphabet{\mathbb}{U}{msb}{m}{n}}


%% Metadata and links support
$if(author-meta)$
\hypersetup{breaklinks=true,
            bookmarks=true,
            pdfauthor={$author-meta$},
            pdftitle={$title-meta$},
            colorlinks=true,
            citecolor=$if(citecolor)$$citecolor$$else$blue$endif$,
            urlcolor=$if(urlcolor)$$urlcolor$$else$blue$endif$,
            linkcolor=$if(linkcolor)$$linkcolor$$else$magenta$endif$,
            pdfborder={0 0 0}}
$endif$

\urlstyle{same}  % don't use monospace font for urls


%% Code highlightning
$if(highlighting-macros)$
$highlighting-macros$
$endif$


%% Use scaled images
\usepackage{graphicx}
\makeatletter
\def\ScaleIfNeeded{%
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother
\let\Oldincludegraphics\includegraphics
{%
 \catcode`\@=11\relax%
 \gdef\includegraphics{\@ifnextchar[{\Oldincludegraphics}{\Oldincludegraphics[width=\ScaleIfNeeded]}}%
}%


%% Title page setup
$if(title)$
\title{$title$}
\author{$for(author)$$author$$sep$ \\ $endfor$}
\date{$date$}
$endif$


%% Paragraph's first line indentation and separation
$if(parindent)$
\setlength{\parindent}{$parindent$}
$endif$
$if(parskip)$
\abnormalparskip{$parskip$}
$endif$


%% Column separation in case of using twocolumn
$if(columnseparation)$
\setlength{\columnsep}{$columnseparation$}
$endif$


%% Set margins
$if(uppermargin)$
\setulmarginsandblock{$uppermargin$}{$bottommargin$}{*}
\setlrmarginsandblock{$leftmargin$}{$rightmargin$}{*}
\checkandfixthelayout
$endif$


%% Setup side notes
$if(sidenotespos)$
\sideparmargin{$sidenotespos$}
\setmarginnotes{$sidenotessep$}{$sidenoteswidth$}{$sidenotesgap$}
\newcommand{\mlksidepar}[1]{
  \sidepar{$sidenotessize$ #1}}
$endif$


%% Here begins the document
\begin{document}


%% Title page
$if(title)$
\newgeometry{left=$titlewidth$,right=$titlewidth$,top=$titleheight$,bottom=$titleheight$}
\pagenumbering{gobble}
\maketitle
\restoregeometry
$endif$


%% TOC
$if(toc)$
{
\hypersetup{linkcolor=black}
\setcounter{tocdepth}{$toc-depth$}
\pagenumbering{gobble}
\tableofcontents
}
$endif$


%% Numbering
\pagenumbering{arabic}
\setcounter{page}{1}


%% Left justification
$if(left)$
\RaggedRight
$endif$


%% Main content
$body$

\end{document}


